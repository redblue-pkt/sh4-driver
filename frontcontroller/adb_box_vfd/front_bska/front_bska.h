#define FPANEL_PORT2_IRQ                        88

#define BUTTON_PRESSED                          0x04
#define BUTTON_RELEASED                         0x00

/**************/
/* For button */
/**************/
#define PIO2_BASE_ADDRESS   0x18022000
#define PIO2_IO_SIZE        0x1000
#define PIO_CLR_PnC0        0x28
#define PIO_CLR_PnC1        0x38
#define PIO_CLR_PnC2        0x48
#define PIO_SET_PnC0        0x24
#define PIO_SET_PnC1        0x34
#define PIO_SET_PnC2        0x44
#define PIO_PnMASK          0x60
#define PIO_PnCOMP          0x50

#define PIO_SET_PnCOMP          0x54
#define PIO_CLR_PnCOMP          0x58

#define PIO_PnIN                        0x10

#define BUTTON_PIN                      0x04 // The input pin of the button is port 5 pin 7

typedef struct
{
	unsigned int pio_addr;
	unsigned char button;
} Global_Status_t;

#define VFD_MAJOR			147

#define PIO_PORT_SIZE			0x1000
#define PIO_BASE				0xb8020000
#define STPIO_SET_OFFSET		0x4
#define STPIO_CLEAR_OFFSET		0x8
#define STPIO_POUT_OFFSET		0x00

#define STPIO_SET_PIN(PIO_ADDR, PIN, V) writel(1<<PIN, PIO_ADDR + STPIO_POUT_OFFSET + ((V)? STPIO_SET_OFFSET : STPIO_CLEAR_OFFSET))
#define PIO_PORT(n) (((n)*PIO_PORT_SIZE) + PIO_BASE)

#define VFDDCRAMWRITE		0xc0425a00
#define VFDBRIGHTNESS		0xc0425a03
#define VFDDISPLAYWRITEONOFF	0xc0425a05
#define VFDDRIVERINIT		0xc0425a08
#define VFDICONDISPLAYONOFF	0xc0425a0a

struct vfd_ioctl_data
{
	unsigned char address;
	unsigned char data[64];
	unsigned char length;
};


static const unsigned char ROM[256] =
{
	0x2e,//0x00, icon play
	0x8f,//0x01, icon stop
	0xe4,//0x02, icon pause
	0xdd,//0x03, icon ff
	0xdc,//0x04, icon rewind
	0x10,//0x05,
	0x10,//0x06,
	0x10,//0x07,
	0x10,//0x08,
	0x10,//0x09,
	0x10,//0x0a,
	0x10,//0x0b,
	0x10,//0x0c,
	0x10,//0x0d,
	0x10,//0x0e,
	0x10,//0x0f,

	0x10,//0x10,,reserved
	0x11,//0x11,,reserved
	0x12,//0x12,,reserved
	0x13,//0x13,,reserved
	0x14,//0x14,,reserved
	0x15,//0x15,,reserved
	0x16,//0x16,,reserved
	0x17,//0x17,,reserved
	0x18,//0x18,,reserved
	0x19,//0x19,,reserved
	0x1a,//0x1a,,reserved
	0x1b,//0x1b,,reserved
	0x1c,//0x1c,,reservedr
	0x10,//0x1d,,reserved
	0x10,//0x1e,,reserved
	0x10,//0x1f, , reserved

	0x00,//0x20, <space> ok
	0x21,//0x21,!
	0x22,//0x22,"
	0x23,//0x23,#
	0x24,//0x24,$
	0x25,//0x25,%
	0x26,//0x26,&
	0x27,//0x27,'
	0x28,//0x28,(
	0x29,//0x29,)
	0x2a,//0x2a,*
	0x2b,//0x2b,+
	0x2c,//0x2c,,
	0x40,//0x2d,-	ok
	0x2e,//0x2e,.
	0x2f,//0x2f, /

	0x3f,//0x30,0    ok
	0x06,//0x31,1    ok
	0x5b,//0x32,2    ok
	0x4f,//0x33,3    ok
	0x66,//0x34,4    ok
	0x6d,//0x35,5    ok
	0x7d,//0x36,6    ok
	0x07,//0x37,7    ok
	0x7f,//0x38,8    ok
	0x6f,//0x39,9    ok
	0x3a,//0x3a,:
	0x3b,//0x3b,;
	0x3c,//0x3c,<
	0x3d,//0x3d,=
	0x3e,//0x3e,>
	0x3f,//0x3f, ?

	0x40,//0x40,@
	119,//0x41,A ok
	0x7f,//0x42,B ok
	57,//0x43,C ok
	0x3f,//0x44,D ok
	121,//0x45,E ok
	113,//0x46,F ok
	0x7d,//0x47,G ok
	0x76,//0x48,H ok
	0x06,//0x49,I ok
	14,//0x4a,J ok
	0x76,//0x4b,K ok
	56,//0x4c,L ok
	55,//0x4d,M ok
	55,//0x4e,N ok
	0x3f,//0x4f,O ok

	115,//0x50,P  ok
	0x3f,//0x51,Q  ok
	119,//0x52,R  ok
	109,//0x53,S  ok
	49,//0x54,T  ok
	62,//0x55,U  ok
	62,//0x56,V  ok
	62,//0x57,W  ok
	0x76,//0x58,X  ok
	102,//0x59,Y  ok
	0x5b,//0x5a,Z  ok
	0x30,//0x5b [  ok
	0x5c,//0x5c,  l
	0x06,//0x5d,]  ok
	0x5e,//0x5e,^
	0x5f,//0x5f,

	0x60,//0x60,`
	119,//0x61,a  ok
	124,//0x62,b  ok
	88,//0x63,c  ok
	94,//0x64,d  ok
	121,//0x65,e  ok
	113,//0x66,f  ok
	0x6f,//0x67,g  ok
	116,//0x68,h  ok
	0x04,//0x69,i  ok
	14,//0x6a,j  ok
	120,//0x6b,k  ok
	56,//0x6c,l  ok
	0x54,//0x6d,m  ok
	0x54,//0x6e,n  ok
	92,//0x6f,o  ok

	115,//0x70,p  ok
	103,//0x71,q  ok
	0x50,//0x72,r  ok
	109,//0x73,s  ok
	120,//0x74,t  ok
	0x1c,//0x75,u  ok
	0x1c,//0x76,v  ok
	0x1c,//0x77,w  ok
	0x76,//0x78,x  ok
	110,//0x79,y  ok
	0x5b,//0x7a,z  ok
	0x7b,//0x7b,{
	0x7c,//0x7c,
	0x7d,//0x7d,}
	0x7e,//0x7e,~
	0x7f,//0x7f, <DEL>--> all light on

	0x84,//0x80,a -umulaut
	0x94,//0x81,o -umulaut
	0x81,//0x82,u -umulaut
	0x8e,//0x83,A -umulaut
	0x99,//0x84,O -umulaut
	0x9a,//0x85,U -umulaut
	0xb1,//0x86,��- estset
	0x10,//0x87,reserved
	0x10,//0x88,reserved
	0x10,//0x89,reserved
	0x10,//0x8a,reserved
	0x10,//0x8b,reserved
	0x10,//0x8c,reserved
	0x10,//0x8d,reserved
	0x10,//0x8e,reserved
	0x10,//0x8f,  reserved

	0x10,//0x90,reserved
	0x10,//0x91,reserved
	0x10,//0x92,reserved
	0x10,//0x93,reserved
	0x10,//0x94,reserved
	0x10,//0x95,reserved
	0x10,//0x96,reserved
	0x10,//0x97,reserved
	0x10,//0x98,reserved
	0x10,//0x99,reserved
	0x10,//0x9a,reserved
	0x10,//0x9b,reserved
	0x10,//0x9c,reservedr
	0x10,//0x9d,reserved
	0x10,//0x9e,reserved
	0x10,//0x9f, reserved

	0x10,//0xa0,reserved
	0x10,//0xa1,reserved
	0x10,//0xa2,reserved
	0x10,//0xa3,reserved
	0x10,//0xa4,reserved
	0x10,//0xa5,reserved
	0x10,//0xa6,reserved
	0x10,//0xa7,reserved
	0x10,//0xa8,reserved
	0x10,//0xa9,reserved
	0x10,//0xaa,reserved
	0x10,//0xab,reserved
	0x10,//0xac,eserved
	0x10,//0xad,reserved
	0x10,//0xae,reserved
	0x10,//0xaf, reserved

	0x10,//0xb0, reserved
	0x10,//0xb1, reserved
	0x10,//0xb2, reserved
	0x10,//0xb3, reserved
	0x10,//0xb4, reserved
	0x10,//0xb5, reserved
	0x10,//0xb6, reserved
	0x10,//0xb7, reserved
	0x10,//0xb8, reserved
	0x10,//0xb9, reserved
	0x10,//0xba, reserved
	0x10,//0xbb, reserved
	0x10,//0xbc,reserved
	0x10,//0xbd, reserved
	0x10,//0xbe, reserved
	0x10,//0xbf, reserved

	0x10,//0xc0, reserved
	0x10,//0xc1, reserved
	0x10,//0xc2, reserved
	0x10,//0xc3, reserved
	0x10,//0xc4, reserved
	0x10,//0xc5, reserved
	0x10,//0xc6, reserved
	0x10,//0xc7, reserved
	0x10,//0xc8, reserved
	0x10,//0xc9, reserved
	0x10,//0xca, reserved
	0x10,//0xcb, reserved
	0x10,//0xcc, reserved
	0x10,//0xcd, reserved
	0x10,//0xce, reserved
	0x10,//0xcf, reserved

	0x10,//0xd0, reserved
	0x10,//0xd1, reserved
	0x10,//0xd2, reserved
	0x10,//0xd3, reserved
	0x10,//0xd4, reserved
	0x10,//0xd5, reserved
	0x10,//0xd6, reserved
	0x10,//0xd7, reserved
	0x10,//0xd8, reserved
	0x10,//0xd9, reserved
	0x10,//0xda, reserved
	0x10,//0xdb, reserved
	0x10,//0xdc,reserved
	0x10,//0xdd, reserved
	0x10,//0xde, reserved
	0x10,//0xdf, reserved

	0x10,//0xe0, reserved
	0x10,//0xe1, reserved
	0x10,//0xe2, reserved
	0x10,//0xe3, reserved
	0x10,//0xe4, reserved
	0x10,//0xe5, reserved
	0x10,//0xe6, reserved
	0x10,//0xe7, reserved
	0x10,//0xe8, reserved
	0x10,//0xe9, reserved
	0x10,//0xea, reserved
	0x10,//0xeb, reserved
	0x10,//0xec,reserved
	0x10,//0xed, reserved
	0x10,//0xee, reserved
	0x10,//0xef, reserved

	//kolejne segmenty wyswietlacza
	0x01,//0xf0,  reserved
	0x02,//0xf1,  reserved
	0x04,//0xf2,  reserved
	0x08,//0xf3,  reserved
	0x10,//0xf4,  reserved
	0x20,//0xf5,  reserved
	0x40,//0xf6,  reserved
	0x80,//0xf7,  reserved
	0x10,//0xf8,  reserved
	0x10,//0xf9,  reserved
	0x10,//0xfa,  reserved
	0x10,//0xfb,  reserved
	0x10,//0xfc, reserved
	0x10,//0xfd,  reserved
	0x10,//0xfe,  reserved
	0x10,//0xff, reservedr
};
